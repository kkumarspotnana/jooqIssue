# Jooq Conversion Issue

## Description
This project demonstrates the usage of jOOQ with different PostgreSQL data types and highlights issues with `citext` type in different versions of jOOQ.

## Prerequisites
- Java 17 or higher
- Maven
- PostgreSQL

## Installation
1. Clone the repository:
    ```sh
    git clone https://github.com/kkumarspotnana/jooq-conversion-issue.git
    ```
2. Navigate to the project directory:
    ```sh
    cd jooq-conversion-issue
    ```
3. Run ``docker-test-compose.yml`` file in ``src/main/resources`` to bring up a docker DB instance. 
   You may check the port configuration in the file. This will be required for jooq codegen config defined in ``pom.xml``
    ```sh
    docker-compose -f src/main/resources/docker-test-compose.yml up
    ```
4.  Run  ``init.sql`` file in ``src/main/resources`` to create the required tables and insert some data.
    This will be used by jooq codegen.

5.  You can select the version of jooq accordingly in ``pom.xml``. Build the project using Maven after every jooq version change for jooq codegen consistency:
    ```sh
    mvn clean install 
    ```
6.  Run the ``ConversionIssueApplication.java`` to run the application and generate the logs.


## Usage
1.  A sample output has been provided in ``sampleOutput`` directory. 
    You can compare the output with the logs generated by running the application.
2. The logs will show the conversion issues with different jooq versions.
   Primarily when we run the contains() query in ``citext`` field (), the jooq ``v3.19.18`` version does automatic casting to ``varchar``
   which makes ``citext`` loose its inherent property to return ``case-insensitive`` results even in like operation.

